# Applied Financial Engineering — Framework Guide

## Framework Guide Table

| Lifecycle Stage                         | What You Did                                                                                                                                                                                           | Challenges                                                                 | Solutions / Decisions                                                                     | Future Improvements                                                        |
| --------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ | -------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------- | -------------------------------------------------------------------------- |
| **1. Problem Framing & Scoping**        | Chose to study **AAPL daily returns** and attempt to link them with sentiment/news while also exploring purely technical features. Goal: build a reproducible ML pipeline from ingestion to reporting. | Scope creep (too many ideas), limited access to consistent sentiment data. | Pivoted scope: kept core price-based modeling, documented sentiment issues transparently. | Start with clear feasibility checks (data availability) before committing. |
| **2. Tooling Setup**                    | Used Python, Pandas, scikit-learn, yfinance API, Flask, and Streamlit. Repo structured with `/data`, `/src`, `/notebooks`.                                                                             | Dependency mismatches, datetime parsing errors.                            | Fixed by pinning versions in `requirements.txt` and standardizing timezones.              | Automate environment setup with Docker.                                    |
| **3. Python Fundamentals**              | Applied loops, functions, and OOP-lite for reusable cleaning and modeling code.                                                                                                                        | Occasional bugs from inplace DataFrame ops.                                | Adopted functional style and unit-tested helper functions.                                | Keep improving Python fluency, add type hints and pytest.                  |
| **4. Data Acquisition / Ingestion**     | Pulled AAPL price data from Yahoo Finance; attempted sentiment from API.                                                                                                                               | Sentiment API only gave sparse, end-of-month data.                         | Ingested what was available, logged gaps, pivoted away from sentiment focus.              | Explore alternative APIs or scrape broader news sources.                   |
| **5. Data Storage**                     | Saved CSVs under `/data/raw` and `/data/processed`, timestamped for reproducibility.                                                                                                                   | Losing track of latest version.                                            | Added helper to auto-pick most recent file.                                               | Use database or DVC for versioned storage.                                 |
| **6. Data Preprocessing**               | Cleaned OHLCV, handled missing dates, forward-filled small gaps, computed returns and z-scores.                                                                                                        | Accidentally dropped dates → NaT rows.                                     | Fixed `ffill_ohlcv_by_date` to preserve date index.                                       | Add validation checks for date continuity.                                 |
| **7. Outlier Analysis**                 | Flagged outliers using IQR & Z-score, compared winsorizing.                                                                                                                                            | Deciding whether extreme returns were errors or market shocks.             | Winsorized at 5/95% to reduce undue influence.                                            | Explore robust models (quantile regression).                               |
| **8. EDA**                              | Visualized distributions, scatterplots, and correlations of returns, volume, gaps.                                                                                                                     | Ret & Ret\_z highly correlated → redundant.                                | Focused on technical features (daily range, gaps).                                        | Add seasonality/weekly pattern checks.                                     |
| **9. Feature Engineering**              | Created lag features, rolling means, volatility, gap, daily range.                                                                                                                                     | Deciding feature horizon without lookahead bias.                           | Always shifted features to avoid leakage.                                                 | Add domain-inspired indicators (RSI, MACD).                                |
| **10. Modeling**                        | Tried classification (predict up/down) with Logistic Regression and Random Forest.                                                                                                                     | Class imbalance & weak predictive power.                                   | Tuned thresholds, compared balanced vs unbalanced models.                                 | Try XGBoost, LSTM for time series.                                         |
| **11. Evaluation & Risk Communication** | Used accuracy, precision, recall, ROC AUC; bootstrapped CI for metrics.                                                                                                                                | Model performance highly unstable.                                         | Reported uncertainty bands and scenario comparisons.                                      | Add stress testing under volatility regimes.                               |
| **12. Delivery Design**                 | Produced plots (risk-return scatter, bar, line) and summary report in `/deliverables/`.                                                                                                                | Simplifying technical assumptions for stakeholders.                        | Used concise Markdown summaries and sensitivity tables.                                   | Build polished slides or dashboard.                                        |
| **13. Productization**                  | Pickled model (`model.pkl`), built Flask API with `/predict` and `/plot`, modularized utils.                                                                                                           | Flask thread issues in notebook.                                           | Ran Flask separately, validated with curl.                                                | Add Streamlit dashboard for easier demo.                                   |
| **14. Deployment & Monitoring**         | Wrote reflection on risks, monitoring at 4 layers: data freshness, model drift, latency, business KPI.                                                                                                 | Hard to design realistic thresholds.                                       | Proposed PSI > 5% or rolling AUC < 0.60 as triggers.                                      | Build monitoring dashboard.                                                |
| **15. Orchestration & System Design**   | Defined pipeline (ingest → clean → model → report), documented DAG with logging & checkpoints.                                                                                                         | Overlaps between manual/automated steps.                                   | Automated clean→model→report, kept ingest manual.                                         | Implement Airflow/Prefect later.                                           |
| **16. Lifecycle Review & Reflection**   | Completed full lifecycle from raw data to API/report handoff.                                                                                                                                          | Biggest struggle: data availability & preprocessing errors.                | Biggest success: building reproducible pipeline with clear docs.                          | Next time, validate data sources earlier; deepen modeling.                 |

---

## Reflection Prompts

* **Most difficult stage:** Sentiment data ingestion — data gaps forced a mid-project pivot.
* **Most rewarding stage:** Feature engineering & EDA — saw direct patterns emerge from transformations.
* **Connections:** Preprocessing mistakes directly cascaded into modeling issues, proving the importance of a solid foundation.
* **What I’d do differently:** Upfront feasibility analysis on external data; earlier automation of logging & validation.
* **Skills to strengthen:** Advanced time-series modeling, monitoring/alerting, and deployment tools (Docker, CI/CD).

---